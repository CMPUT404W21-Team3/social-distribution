{% extends 'base.html' %}

{% block content %}

    <!-- {% if posts %}
        {% for post in posts %}
            <li><a href="/author/{{author.id}}/posts/{{post.id}}">{{post.title}}</a>: </li>
        {% endfor %}
    {% else %}
        <p>{{author.user.first_name}} {{author.user.last_name}} has no posts<p>
    {% endif %} -->

    <!-- <a href="/author/new_post">New Post</a> -->

    <a href="/author/new_post" class="btn btn-outline-success post-button" role="button">New Post</a>
    <a href="/author/new_image_post" class="btn btn-outline-success post-button" role="button">New Image Post</a>
    <a href="/" class="btn btn-outline-success post-button" role="button">Back</a>
    {% if inbox %}
    <form action="{% url 'Profile:inbox' %}?inbox_option=New" method="POST">
        {% csrf_token %}
        <input type="hidden" id="clear_signal" name="clear_signal" value="clear_signal">
        <button type="submit" class="btn btn-outline-danger post-button" id="clear_button">Clear</button>
    </form>
    <form class="form-inline" method="GET">
        <div class="form-group">
            <select class="form-select form-select-sm" id="inbox_option" name="inbox_option">
                <option>New</option>
                <option>Cleared</option>
                <option>All</option>
            </select>
        <button type="submit" class="btn btn-secondary btn-sm">Go</button>
        </div>
    </form>
    {% endif %}
    <!-- <button type="button" class="btn btn-primary">New Post</button> -->
    {% if posts %}
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for post in posts %}
                <!-- <li><a href="/author/{{author.id}}/posts/{{post.id}}">{{post.title}}</a>: </li> -->
                {% if post.visibility == 'PRIVATE' %}
                    <div class="col">
                        <div class="card h-100" style="border: 1px solid red">
                            <div class="card-body">
                                <h5 class="card-title"><a href="/author/{{post.author_id}}/view_post/{{post.id}}">{{post.title}}</a></h5>
                                <h6 class="card-subtitle mb-2 text-muted">Author: @{{post.author.displayName}}</h6>
                                <p class="card-text">{{post.content}}</p>
                            </div>
                        </div>
                    </div>
                {% else %}
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><a href="/author/{{post.author_id}}/view_post/{{post.id}}">{{post.title}}</a></h5>
                            <h6 class="card-subtitle mb-2 text-muted">Author: @{{post.author.displayName}}</h6>
                            <p class="card-text">{{post.content_html | safe}}</p>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <p class="no-post h5">No Posts<p>
    {% endif %}

{% endblock %}
